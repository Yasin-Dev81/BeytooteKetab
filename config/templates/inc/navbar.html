{% load static %}

<header class="header">
    <div class="header__wrap">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="header__content">
                        <button class="header__menu" type="button">
                            <span></span>
                            <span></span>
                            <span></span>
                        </button>

                        <a href="{% url 'home:home' %}" class="header__logo">
                            <img src="{% static 'img/logo.svg' %}" alt="">
                        </a>

                        <ul class="header__nav">
                            <li class="header__nav-item">
                                <a class="header__nav-link" href="{% url 'home:home' %}">خانه</a>
                            </li>
                            <li class="header__nav-item">
                                <a class="header__nav-link" href="#" role="button" id="dropdownMenu1"
                                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">کتاب ها</a>

                                <ul class="dropdown-menu header__nav-menu" aria-labelledby="dropdownMenu1">
                                    <li><a href="{% url 'book:book_list' %}">همه‌ی کتاب‌ها</a></li>
                                    <li><a href="{% url 'accounts:user_favorites' %}">کتاب‌های نشان شده</a></li>
                                </ul>
                            </li>
                            <li class="header__nav-item">
                                <a class="header__nav-link" href="{% url 'blog:blog_list' %}">بلاگ</a>
                            </li>
                            <li class="header__nav-item">
                                <a class="header__nav-link" href="{% url 'order:premium_plans' %}">
                                    اشتراک پریمیوم
                                </a>
                            </li>
                            <li class="header__nav-item">
                                <a class="header__nav-link" href="{% url 'home:faq' %}">مرکز راهنما</a>
                            </li>
                            <li class="header__nav-item">
                                <a class="header__nav-link" href="#" role="button" id="dropdownMenu3"
                                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <svg xmlns='http://www.w3.org/2000/svg' width='512' height='512'
                                         viewBox='0 0 512 512'>
                                        <circle cx='256' cy='256' r='32'
                                                style='fill:none; stroke-miterlimit:10;stroke-width:32px'/>
                                        <circle cx='416' cy='256' r='32'
                                                style='fill:none;stroke-miterlimit:10;stroke-width:32px'/>
                                        <circle cx='96' cy='256' r='32'
                                                style='fill:none;stroke-miterlimit:10;stroke-width:32px'/>
                                    </svg>
                                </a>

                                <ul class="dropdown-menu header__nav-menu header__nav-menu--scroll"
                                    aria-labelledby="dropdownMenu3">
                                    <li><a href="{% url 'home:about' %}">درباره ما</a></li>
                                    <li><a href="{% url 'home:privacy' %}">حریم خصوصی</a></li>
                                    <li><a href="{% url 'home:contact' %}">تماس با ما</a></li>
                                    <li><a href="{% url 'accounts:forgot_password' %}">فراموشی رمز عبور</a></li>
                                </ul>
                        </ul>

                        {% if user.is_authenticated %}
                            <div class="header__actions mr-auto">
                                <a href="{% url 'order:premium_plans' %}" class="header__link">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512"
                                         viewBox="0 0 24 24">
                                        <path d="M12 2l1.4 4.3h4.6l-3.7 2.7 1.3 4.5-3.9-2.9-3.9 2.9 1.3-4.5-3.7-2.7h4.6z"/>
                                        <path d="M0 0h24v24H0z" fill="none"/>
                                    </svg>
                                    <span>Upgrade to Premium</span>
                                </a>
                                <a href="{% url 'accounts:user_logout' %}?next={{ request.path }}"
                                   class="header__login mr-auto">
                                    <svg xmlns='http://www.w3.org/2000/svg' width='512' height='512'
                                         viewBox='0 0 512 512'>
                                        <path d='M192,176V136a40,40,0,0,1,40-40H392a40,40,0,0,1,40,40V376a40,40,0,0,1-40,40H240c-22.09,0-48-17.91-48-40V336'
                                              style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/>
                                        <polyline points='288 336 368 256 288 176'
                                                  style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/>
                                        <line x1='80' y1='256' x2='352' y2='256'
                                              style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/>
                                    </svg>
                                    <span>خروج</span>
                                </a>
                            </div>
                        {% else %}
                            <div class="header__actions">
                                <a href="{% url 'order:premium_plans' %}" class="header__link">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512"
                                         viewBox="0 0 24 24">
                                        <path d="M12 2l1.4 4.3h4.6l-3.7 2.7 1.3 4.5-3.9-2.9-3.9 2.9 1.3-4.5-3.7-2.7h4.6z"/>
                                        <path d="M0 0h24v24H0z" fill="none"/>
                                    </svg>
                                    <span>Upgrade to Premium</span>
                                </a>
                                <a href="{% url 'accounts:user_login' %}?next={{ request.path }}"
                                   class="header__login mr-auto">
                                    <svg xmlns='http://www.w3.org/2000/svg' width='512' height='512'
                                         viewBox='0 0 512 512'>
                                        <path d='M192,176V136a40,40,0,0,1,40-40H392a40,40,0,0,1,40,40V376a40,40,0,0,1-40,40H240c-22.09,0-48-17.91-48-40V336'
                                              style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/>
                                        <polyline points='288 336 368 256 288 176'
                                                  style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/>
                                        <line x1='80' y1='256' x2='352' y2='256'
                                              style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/>
                                    </svg>
                                    <span>ورود / ثبت‌نام</span>
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="header__wrap">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="header__content">
                        <form action="{% url 'book:book_list' %}" class="header__form" method="GET">
                            <input type="text" class="header__input" placeholder="جستجو کنید ..." name="book_name" value="{{ request.GET.book_name }}">
                            <button class="header__btn" type="submit">
                                <svg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 512 512'>
                                    <path d='M221.09,64A157.09,157.09,0,1,0,378.18,221.09,157.1,157.1,0,0,0,221.09,64Z'
                                          style='fill:none;stroke-miterlimit:10;stroke-width:32px'/>
                                    <line x1='338.29' y1='338.29' x2='448' y2='448'
                                          style='fill:none;stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px'/>
                                </svg>
                            </button>
                        </form>

                        <div class="header__notifications">
                            {% if messages %}
                                <div class="header__messages">
                                    {% for message in messages %}
                                        <div class="header__message alert alert-{{ message.tags }}">
                                        <span>
                                            {{ message }}
                                        </span> <span></span>
                                            <button class="header__message-remove" type="button"
                                                    onclick="removeMessage(this)">
                                                حذف پیام
                                            </button>
                                        </div>
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>

                        <div class="header__actions header__actions--2">
                            <a href="{% url 'accounts:user_favorites' %}" class="header__link">
                                <svg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 512 512'>
                                    <path d='M352.92,80C288,80,256,144,256,144s-32-64-96.92-64C106.32,80,64.54,124.14,64,176.81c-1.1,109.33,86.73,187.08,183,252.42a16,16,0,0,0,18,0c96.26-65.34,184.09-143.09,183-252.42C447.46,124.14,405.68,80,352.92,80Z'
                                          style='fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px'/>
                                </svg>
                                <span>نشان ها</span>
                            </a>

                            <a href="{% url 'order:user_profile' %}" class="header__link">
                                <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512">
                                    <circle cx="256" cy="208" r="96"
                                            style="fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/>
                                    <path d="M256 336c-48 0-88-40-88-88s40-88 88-88 88 40 88 88-40 88-88 88z"
                                          style="fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/>
                                    <path d="M416 464c0-48-40-80-88-80H184c-48 0-88 32-88 80"
                                          style="fill:none;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/>
                                </svg>
                                <span>پروفایل</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<script>
    function removeMessage(button) {
        // Find the parent message element
        const messageElement = button.closest(".header__message");

        // Check if a parent message element was found
        if (messageElement) {
            // Remove the message element from the DOM
            messageElement.remove();
        }
    }
</script>